{% extends 'base.html.twig' %}

{% block title %}User account{% endblock %}

{% block content %}
<h1>Bonjour {{ user.email }}</h1>

{% for status, orders in ordersByStatus %}
    <hr>
    <div class="example-wrapper">
        <h2 class="mb-3">{{ orders|length > 1 ? 'Commandes' : 'Commande'  }} {{ status|title }}</h2>
        {% if orders is not empty %}
            {% for order in orders %}
                <div class="card mb-3">
                    <div class="card-body">
                        <h3 class="card-title">Commande #{{ order.id }}</h3>
                        <ol>
                            <li class="card-text">Du: {{ order.createdAt|date('Y-m-d H:i:s') }}</li>
                            <li class="card-text">Total: {{ order.total }}</li>
                            <li class="card-text">Statut de la commande: {{ order.status }}</li>
                        </ol>
                        <h3 class="card-title">{{ order.items.count() > 1 ? 'Produits' : 'Produit'  }}</h3>
                        {% for item in order.items %}
                            <ol>
                                <li class="card-text">Produit: {{ item.product.name }}</li>
                                <li class="card-text">Quantité: {{ item.quantity }}</li>
                                <li class="card-text">Prix: {{ item.product.sellingPrice }}</li>
                            </ol>
                        {% endfor %}
                        <a href="{{ path( 'app_order_process' , {'id': order.id} ) }}" class="btn btn-primary">Valider cette commande</a>
                        <a href="{{ path( 'app_order_cancel' , {'id': order.id} ) }}" class="btn btn-primary mt-3">Supprimer cette commande</a>
                        
                        {# {% if status == 'new' %}
                            <p>Message spécifique pour les commandes en attente dans le panier</p>
                        {% elseif status == 'pending' %}
                            <p>Message spécifique pour les commandes en attente de paiement</p>
                        {% elseif status == 'paid' %}
                            <p>Message spécifique pour les commandes validées et payées</p>
                        {% elseif status == 'preparing' %}
                            <p>Message spécifique pour les commandes en cours de préparation</p>
                        {% elseif status == 'shipped' %}
                            <p>Message spécifique pour les commandes en cours d'expédition</p>
                        {% elseif status == 'completed' %}
                            <p>Message spécifique pour les commandes terminées</p>
                        {% elseif status == 'cancelled' %}
                            <p>Message spécifique pour les commandes annulées</p>
                        {% endif %} #}

                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>Aucune commande {{ status|title }}</p>
        {% endif %}
    </div>
{% endfor %}

{% endblock %}
